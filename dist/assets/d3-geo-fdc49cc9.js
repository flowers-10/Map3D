import{A as b,m as Ht}from"./d3-array-39cd0da9.js";var m=1e-6,Vn=1e-12,N=Math.PI,J=N/2,wt=N/4,Q=N*2,q=180/N,T=N/180,Y=Math.abs,Ot=Math.atan,fn=Math.atan2,I=Math.cos,ai=Math.exp,xn=Math.hypot,pi=Math.log,A=Math.sin,si=Math.sign||function(n){return n>0?1:n<0?-1:0},en=Math.sqrt,hi=Math.tan;function vi(n){return n>1?0:n<-1?N:Math.acos(n)}function ln(n){return n>1?J:n<-1?-J:Math.asin(n)}function K(){}function In(n,t){n&&$t.hasOwnProperty(n.type)&&$t[n.type](n,t)}var yt={Feature:function(n,t){In(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,i=-1,e=r.length;++i<e;)In(r[i].geometry,t)}},$t={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)n=r[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){kn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)kn(r[i],t,0)},Polygon:function(n,t){Pt(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)Pt(r[i],t)},GeometryCollection:function(n,t){for(var r=n.geometries,i=-1,e=r.length;++i<e;)In(r[i],t)}};function kn(n,t,r){var i=-1,e=n.length-r,c;for(t.lineStart();++i<e;)c=n[i],t.point(c[0],c[1],c[2]);t.lineEnd()}function Pt(n,t){var r=-1,i=n.length;for(t.polygonStart();++r<i;)kn(n[r],t,1);t.polygonEnd()}function un(n,t){n&&yt.hasOwnProperty(n.type)?yt[n.type](n,t):In(n,t)}function jn(n){return[fn(n[1],n[0]),ln(n[2])]}function sn(n){var t=n[0],r=n[1],i=I(r);return[i*I(t),i*A(t),A(r)]}function Rn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function An(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Jn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function _n(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function bn(n){var t=en(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}var gn,Tn,Cn,Fn,mn,Xn,Yn,Zn,nt,tt,it,Jt,Kt,W,B,G,x={sphere:K,point:gt,lineStart:Mt,lineEnd:Rt,polygonStart:function(){x.lineStart=Si,x.lineEnd=Ei},polygonEnd:function(){x.lineStart=Mt,x.lineEnd=Rt}};function gt(n,t){n*=T,t*=T;var r=I(t);Pn(r*I(n),r*A(n),A(t))}function Pn(n,t,r){++gn,Cn+=(n-Cn)/gn,Fn+=(t-Fn)/gn,mn+=(r-mn)/gn}function Mt(){x.point=gi}function gi(n,t){n*=T,t*=T;var r=I(t);W=r*I(n),B=r*A(n),G=A(t),x.point=di,Pn(W,B,G)}function di(n,t){n*=T,t*=T;var r=I(t),i=r*I(n),e=r*A(n),c=A(t),l=fn(en((l=B*c-G*e)*l+(l=G*i-W*c)*l+(l=W*e-B*i)*l),W*i+B*e+G*c);Tn+=l,Xn+=l*(W+(W=i)),Yn+=l*(B+(B=e)),Zn+=l*(G+(G=c)),Pn(W,B,G)}function Rt(){x.point=gt}function Si(){x.point=wi}function Ei(){Qt(Jt,Kt),x.point=gt}function wi(n,t){Jt=n,Kt=t,n*=T,t*=T,x.point=Qt;var r=I(t);W=r*I(n),B=r*A(n),G=A(t),Pn(W,B,G)}function Qt(n,t){n*=T,t*=T;var r=I(t),i=r*I(n),e=r*A(n),c=A(t),l=B*c-G*e,f=G*i-W*c,g=W*e-B*i,v=xn(l,f,g),o=ln(v),u=v&&-o/v;nt.add(u*l),tt.add(u*f),it.add(u*g),Tn+=o,Xn+=o*(W+(W=i)),Yn+=o*(B+(B=e)),Zn+=o*(G+(G=c)),Pn(W,B,G)}function ir(n){gn=Tn=Cn=Fn=mn=Xn=Yn=Zn=0,nt=new b,tt=new b,it=new b,un(n,x);var t=+nt,r=+tt,i=+it,e=xn(t,r,i);return e<Vn&&(t=Xn,r=Yn,i=Zn,Tn<m&&(t=Cn,r=Fn,i=mn),e=xn(t,r,i),e<Vn)?[NaN,NaN]:[fn(r,t)*q,ln(i/e)*q]}function rt(n,t){function r(i,e){return i=n(i,e),t(i[0],i[1])}return n.invert&&t.invert&&(r.invert=function(i,e){return i=t.invert(i,e),i&&n.invert(i[0],i[1])}),r}function et(n,t){return Y(n)>N&&(n-=Math.round(n/Q)*Q),[n,t]}et.invert=et;function Ut(n,t,r){return(n%=Q)?t||r?rt(Nt(n),Lt(t,r)):Nt(n):t||r?Lt(t,r):et}function _t(n){return function(t,r){return t+=n,Y(t)>N&&(t-=Math.round(t/Q)*Q),[t,r]}}function Nt(n){var t=_t(n);return t.invert=_t(-n),t}function Lt(n,t){var r=I(n),i=A(n),e=I(t),c=A(t);function l(f,g){var v=I(g),o=I(f)*v,u=A(f)*v,a=A(g),s=a*r+o*i;return[fn(u*e-s*c,o*r-a*i),ln(s*e+u*c)]}return l.invert=function(f,g){var v=I(g),o=I(f)*v,u=A(f)*v,a=A(g),s=a*e-u*c;return[fn(u*e+a*c,o*r+s*i),ln(s*r-o*i)]},l}function yi(n){n=Ut(n[0]*T,n[1]*T,n.length>2?n[2]*T:0);function t(r){return r=n(r[0]*T,r[1]*T),r[0]*=q,r[1]*=q,r}return t.invert=function(r){return r=n.invert(r[0]*T,r[1]*T),r[0]*=q,r[1]*=q,r},t}function $i(n,t,r,i,e,c){if(r){var l=I(t),f=A(t),g=i*r;e==null?(e=t+i*Q,c=t-g/2):(e=zt(l,e),c=zt(l,c),(i>0?e<c:e>c)&&(e+=i*Q));for(var v,o=e;i>0?o>c:o<c;o-=g)v=jn([l,-f*I(o),-f*A(o)]),n.point(v[0],v[1])}}function zt(n,t){t=sn(t),t[0]-=n,bn(t);var r=vi(-t[1]);return((-t[2]<0?-r:r)+Q-m)%Q}function Vt(){var n=[],t;return{point:function(r,i,e){t.push([r,i,e])},lineStart:function(){n.push(t=[])},lineEnd:K,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var r=n;return n=[],t=null,r}}}function zn(n,t){return Y(n[0]-t[0])<m&&Y(n[1]-t[1])<m}function Nn(n,t,r,i){this.x=n,this.z=t,this.o=r,this.e=i,this.v=!1,this.n=this.p=null}function xt(n,t,r,i,e){var c=[],l=[],f,g;if(n.forEach(function(h){if(!((y=h.length-1)<=0)){var y,d=h[0],R=h[y],E;if(zn(d,R)){if(!d[2]&&!R[2]){for(e.lineStart(),f=0;f<y;++f)e.point((d=h[f])[0],d[1]);e.lineEnd();return}R[0]+=2*m}c.push(E=new Nn(d,h,null,!0)),l.push(E.o=new Nn(d,null,E,!1)),c.push(E=new Nn(R,h,null,!1)),l.push(E.o=new Nn(R,null,E,!0))}}),!!c.length){for(l.sort(t),It(c),It(l),f=0,g=l.length;f<g;++f)l[f].e=r=!r;for(var v=c[0],o,u;;){for(var a=v,s=!0;a.v;)if((a=a.n)===v)return;o=a.z,e.lineStart();do{if(a.v=a.o.v=!0,a.e){if(s)for(f=0,g=o.length;f<g;++f)e.point((u=o[f])[0],u[1]);else i(a.x,a.n.x,1,e);a=a.n}else{if(s)for(o=a.p.z,f=o.length-1;f>=0;--f)e.point((u=o[f])[0],u[1]);else i(a.x,a.p.x,-1,e);a=a.p}a=a.o,o=a.z,s=!s}while(!a.v);e.lineEnd()}}}function It(n){if(t=n.length){for(var t,r=0,i=n[0],e;++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function Kn(n){return Y(n[0])<=N?n[0]:si(n[0])*((Y(n[0])+N)%Q-N)}function Pi(n,t){var r=Kn(t),i=t[1],e=A(i),c=[A(r),-I(r),0],l=0,f=0,g=new b;e===1?i=J+m:e===-1&&(i=-J-m);for(var v=0,o=n.length;v<o;++v)if(a=(u=n[v]).length)for(var u,a,s=u[a-1],h=Kn(s),y=s[1]/2+wt,d=A(y),R=I(y),E=0;E<a;++E,h=S,d=M,R=C,s=$){var $=u[E],S=Kn($),P=$[1]/2+wt,M=A(P),C=I(P),L=S-h,z=L>=0?1:-1,X=z*L,w=X>N,H=d*M;if(g.add(fn(H*z*A(X),R*C+H*I(X))),l+=w?L+z*Q:L,w^h>=r^S>=r){var Z=An(sn(s),sn($));bn(Z);var F=An(c,Z);bn(F);var p=(w^L>=0?-1:1)*ln(F[2]);(i>p||i===p&&(Z[0]||Z[1]))&&(f+=w^L>=0?1:-1)}}return(l<-m||l<m&&g<-Vn)^f&1}function kt(n,t,r,i){return function(e){var c=t(e),l=Vt(),f=t(l),g=!1,v,o,u,a={point:s,lineStart:y,lineEnd:d,polygonStart:function(){a.point=R,a.lineStart=E,a.lineEnd=$,o=[],v=[]},polygonEnd:function(){a.point=s,a.lineStart=y,a.lineEnd=d,o=Ht(o);var S=Pi(v,i);o.length?(g||(e.polygonStart(),g=!0),xt(o,Ri,S,r,e)):S&&(g||(e.polygonStart(),g=!0),e.lineStart(),r(null,null,1,e),e.lineEnd()),g&&(e.polygonEnd(),g=!1),o=v=null},sphere:function(){e.polygonStart(),e.lineStart(),r(null,null,1,e),e.lineEnd(),e.polygonEnd()}};function s(S,P){n(S,P)&&e.point(S,P)}function h(S,P){c.point(S,P)}function y(){a.point=h,c.lineStart()}function d(){a.point=s,c.lineEnd()}function R(S,P){u.push([S,P]),f.point(S,P)}function E(){f.lineStart(),u=[]}function $(){R(u[0][0],u[0][1]),f.lineEnd();var S=f.clean(),P=l.result(),M,C=P.length,L,z,X;if(u.pop(),v.push(u),u=null,!!C){if(S&1){if(z=P[0],(L=z.length-1)>0){for(g||(e.polygonStart(),g=!0),e.lineStart(),M=0;M<L;++M)e.point((X=z[M])[0],X[1]);e.lineEnd()}return}C>1&&S&2&&P.push(P.pop().concat(P.shift())),o.push(P.filter(Mi))}}return a}}function Mi(n){return n.length>1}function Ri(n,t){return((n=n.x)[0]<0?n[1]-J-m:J-n[1])-((t=t.x)[0]<0?t[1]-J-m:J-t[1])}const At=kt(function(){return!0},_i,Li,[-N,-J]);function _i(n){var t=NaN,r=NaN,i=NaN,e;return{lineStart:function(){n.lineStart(),e=1},point:function(c,l){var f=c>0?N:-N,g=Y(c-t);Y(g-N)<m?(n.point(t,r=(r+l)/2>0?J:-J),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(f,r),n.point(c,r),e=0):i!==f&&g>=N&&(Y(t-i)<m&&(t-=i*m),Y(c-f)<m&&(c-=f*m),r=Ni(t,r,c,l),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(f,r),e=0),n.point(t=c,r=l),i=f},lineEnd:function(){n.lineEnd(),t=r=NaN},clean:function(){return 2-e}}}function Ni(n,t,r,i){var e,c,l=A(n-r);return Y(l)>m?Ot((A(t)*(c=I(i))*A(r)-A(i)*(e=I(t))*A(n))/(e*c*l)):(t+i)/2}function Li(n,t,r,i){var e;if(n==null)e=r*J,i.point(-N,e),i.point(0,e),i.point(N,e),i.point(N,0),i.point(N,-e),i.point(0,-e),i.point(-N,-e),i.point(-N,0),i.point(-N,e);else if(Y(n[0]-t[0])>m){var c=n[0]<t[0]?N:-N;e=r*c/2,i.point(-c,e),i.point(0,e),i.point(c,e)}else i.point(t[0],t[1])}function zi(n){var t=I(n),r=6*T,i=t>0,e=Y(t)>m;function c(o,u,a,s){$i(s,n,r,a,o,u)}function l(o,u){return I(o)*I(u)>t}function f(o){var u,a,s,h,y;return{lineStart:function(){h=s=!1,y=1},point:function(d,R){var E=[d,R],$,S=l(d,R),P=i?S?0:v(d,R):S?v(d+(d<0?N:-N),R):0;if(!u&&(h=s=S)&&o.lineStart(),S!==s&&($=g(u,E),(!$||zn(u,$)||zn(E,$))&&(E[2]=1)),S!==s)y=0,S?(o.lineStart(),$=g(E,u),o.point($[0],$[1])):($=g(u,E),o.point($[0],$[1],2),o.lineEnd()),u=$;else if(e&&u&&i^S){var M;!(P&a)&&(M=g(E,u,!0))&&(y=0,i?(o.lineStart(),o.point(M[0][0],M[0][1]),o.point(M[1][0],M[1][1]),o.lineEnd()):(o.point(M[1][0],M[1][1]),o.lineEnd(),o.lineStart(),o.point(M[0][0],M[0][1],3)))}S&&(!u||!zn(u,E))&&o.point(E[0],E[1]),u=E,s=S,a=P},lineEnd:function(){s&&o.lineEnd(),u=null},clean:function(){return y|(h&&s)<<1}}}function g(o,u,a){var s=sn(o),h=sn(u),y=[1,0,0],d=An(s,h),R=Rn(d,d),E=d[0],$=R-E*E;if(!$)return!a&&o;var S=t*R/$,P=-t*E/$,M=An(y,d),C=_n(y,S),L=_n(d,P);Jn(C,L);var z=M,X=Rn(C,z),w=Rn(z,z),H=X*X-w*(Rn(C,C)-1);if(!(H<0)){var Z=en(H),F=_n(z,(-X-Z)/w);if(Jn(F,C),F=jn(F),!a)return F;var p=o[0],_=u[0],D=o[1],O=u[1],U;_<p&&(U=p,p=_,_=U);var vn=_-p,nn=Y(vn-N)<m,on=nn||vn<m;if(!nn&&O<D&&(U=D,D=O,O=U),on?nn?D+O>0^F[1]<(Y(F[0]-p)<m?D:O):D<=F[1]&&F[1]<=O:vn>N^(p<=F[0]&&F[0]<=_)){var tn=_n(z,(-X+Z)/w);return Jn(tn,C),[F,jn(tn)]}}}function v(o,u){var a=i?n:N-n,s=0;return o<-a?s|=1:o>a&&(s|=2),u<-a?s|=4:u>a&&(s|=8),s}return kt(l,f,c,i?[0,-n]:[-N,n-N])}function Ii(n,t,r,i,e,c){var l=n[0],f=n[1],g=t[0],v=t[1],o=0,u=1,a=g-l,s=v-f,h;if(h=r-l,!(!a&&h>0)){if(h/=a,a<0){if(h<o)return;h<u&&(u=h)}else if(a>0){if(h>u)return;h>o&&(o=h)}if(h=e-l,!(!a&&h<0)){if(h/=a,a<0){if(h>u)return;h>o&&(o=h)}else if(a>0){if(h<o)return;h<u&&(u=h)}if(h=i-f,!(!s&&h>0)){if(h/=s,s<0){if(h<o)return;h<u&&(u=h)}else if(s>0){if(h>u)return;h>o&&(o=h)}if(h=c-f,!(!s&&h<0)){if(h/=s,s<0){if(h>u)return;h>o&&(o=h)}else if(s>0){if(h<o)return;h<u&&(u=h)}return o>0&&(n[0]=l+o*a,n[1]=f+o*s),u<1&&(t[0]=l+u*a,t[1]=f+u*s),!0}}}}}var dn=1e9,Ln=-dn;function Ai(n,t,r,i){function e(v,o){return n<=v&&v<=r&&t<=o&&o<=i}function c(v,o,u,a){var s=0,h=0;if(v==null||(s=l(v,u))!==(h=l(o,u))||g(v,o)<0^u>0)do a.point(s===0||s===3?n:r,s>1?i:t);while((s=(s+u+4)%4)!==h);else a.point(o[0],o[1])}function l(v,o){return Y(v[0]-n)<m?o>0?0:3:Y(v[0]-r)<m?o>0?2:1:Y(v[1]-t)<m?o>0?1:0:o>0?3:2}function f(v,o){return g(v.x,o.x)}function g(v,o){var u=l(v,1),a=l(o,1);return u!==a?u-a:u===0?o[1]-v[1]:u===1?v[0]-o[0]:u===2?v[1]-o[1]:o[0]-v[0]}return function(v){var o=v,u=Vt(),a,s,h,y,d,R,E,$,S,P,M,C={point:L,lineStart:H,lineEnd:Z,polygonStart:X,polygonEnd:w};function L(p,_){e(p,_)&&o.point(p,_)}function z(){for(var p=0,_=0,D=s.length;_<D;++_)for(var O=s[_],U=1,vn=O.length,nn=O[0],on,tn,Mn=nn[0],an=nn[1];U<vn;++U)on=Mn,tn=an,nn=O[U],Mn=nn[0],an=nn[1],tn<=i?an>i&&(Mn-on)*(i-tn)>(an-tn)*(n-on)&&++p:an<=i&&(Mn-on)*(i-tn)<(an-tn)*(n-on)&&--p;return p}function X(){o=u,a=[],s=[],M=!0}function w(){var p=z(),_=M&&p,D=(a=Ht(a)).length;(_||D)&&(v.polygonStart(),_&&(v.lineStart(),c(null,null,1,v),v.lineEnd()),D&&xt(a,f,p,c,v),v.polygonEnd()),o=v,a=s=h=null}function H(){C.point=F,s&&s.push(h=[]),P=!0,S=!1,E=$=NaN}function Z(){a&&(F(y,d),R&&S&&u.rejoin(),a.push(u.result())),C.point=L,S&&o.lineEnd()}function F(p,_){var D=e(p,_);if(s&&h.push([p,_]),P)y=p,d=_,R=D,P=!1,D&&(o.lineStart(),o.point(p,_));else if(D&&S)o.point(p,_);else{var O=[E=Math.max(Ln,Math.min(dn,E)),$=Math.max(Ln,Math.min(dn,$))],U=[p=Math.max(Ln,Math.min(dn,p)),_=Math.max(Ln,Math.min(dn,_))];Ii(O,U,n,t,r,i)?(S||(o.lineStart(),o.point(O[0],O[1])),o.point(U[0],U[1]),D||o.lineEnd(),M=!1):D&&(o.lineStart(),o.point(p,_),M=!1)}E=p,$=_,S=D}return C}}const ot=n=>n;var Qn=new b,ut=new b,jt,bt,ft,lt,rn={point:K,lineStart:K,lineEnd:K,polygonStart:function(){rn.lineStart=Ti,rn.lineEnd=Fi},polygonEnd:function(){rn.lineStart=rn.lineEnd=rn.point=K,Qn.add(Y(ut)),ut=new b},result:function(){var n=Qn/2;return Qn=new b,n}};function Ti(){rn.point=Ci}function Ci(n,t){rn.point=ni,jt=ft=n,bt=lt=t}function ni(n,t){ut.add(lt*n-ft*t),ft=n,lt=t}function Fi(){ni(jt,bt)}const Tt=rn;var hn=1/0,Dn=hn,$n=-hn,qn=$n,mi={point:Xi,lineStart:K,lineEnd:K,polygonStart:K,polygonEnd:K,result:function(){var n=[[hn,Dn],[$n,qn]];return $n=qn=-(Dn=hn=1/0),n}};function Xi(n,t){n<hn&&(hn=n),n>$n&&($n=n),t<Dn&&(Dn=t),t>qn&&(qn=t)}const Wn=mi;var ct=0,at=0,Sn=0,Bn=0,Gn=0,pn=0,pt=0,st=0,En=0,ti,ii,k,j,V={point:cn,lineStart:Ct,lineEnd:Ft,polygonStart:function(){V.lineStart=Di,V.lineEnd=qi},polygonEnd:function(){V.point=cn,V.lineStart=Ct,V.lineEnd=Ft},result:function(){var n=En?[pt/En,st/En]:pn?[Bn/pn,Gn/pn]:Sn?[ct/Sn,at/Sn]:[NaN,NaN];return ct=at=Sn=Bn=Gn=pn=pt=st=En=0,n}};function cn(n,t){ct+=n,at+=t,++Sn}function Ct(){V.point=Yi}function Yi(n,t){V.point=Zi,cn(k=n,j=t)}function Zi(n,t){var r=n-k,i=t-j,e=en(r*r+i*i);Bn+=e*(k+n)/2,Gn+=e*(j+t)/2,pn+=e,cn(k=n,j=t)}function Ft(){V.point=cn}function Di(){V.point=Wi}function qi(){ri(ti,ii)}function Wi(n,t){V.point=ri,cn(ti=k=n,ii=j=t)}function ri(n,t){var r=n-k,i=t-j,e=en(r*r+i*i);Bn+=e*(k+n)/2,Gn+=e*(j+t)/2,pn+=e,e=j*n-k*t,pt+=e*(k+n),st+=e*(j+t),En+=e*3,cn(k=n,j=t)}const mt=V;function ei(n){this._context=n}ei.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,Q);break}}},result:K};var ht=new b,Un,oi,ui,wn,yn,Hn={point:K,lineStart:function(){Hn.point=Bi},lineEnd:function(){Un&&fi(oi,ui),Hn.point=K},polygonStart:function(){Un=!0},polygonEnd:function(){Un=null},result:function(){var n=+ht;return ht=new b,n}};function Bi(n,t){Hn.point=fi,oi=wn=n,ui=yn=t}function fi(n,t){wn-=n,yn-=t,ht.add(en(wn*wn+yn*yn)),wn=n,yn=t}const Xt=Hn;let Yt,On,Zt,Dt;class qt{constructor(t){this._append=t==null?li:Gi(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==Zt||this._append!==On){const i=this._radius,e=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Zt=i,On=this._append,Dt=this._,this._=e}this._+=Dt;break}}}result(){const t=this._;return this._="",t.length?t:null}}function li(n){let t=1;this._+=n[0];for(const r=n.length;t<r;++t)this._+=arguments[t]+n[t]}function Gi(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return li;if(t!==Yt){const r=10**t;Yt=t,On=function(e){let c=1;this._+=e[0];for(const l=e.length;c<l;++c)this._+=Math.round(arguments[c]*r)/r+e[c]}}return On}function rr(n,t){let r=3,i=4.5,e,c;function l(f){return f&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),un(f,e(c))),c.result()}return l.area=function(f){return un(f,e(Tt)),Tt.result()},l.measure=function(f){return un(f,e(Xt)),Xt.result()},l.bounds=function(f){return un(f,e(Wn)),Wn.result()},l.centroid=function(f){return un(f,e(mt)),mt.result()},l.projection=function(f){return arguments.length?(e=f==null?(n=null,ot):(n=f).stream,l):n},l.context=function(f){return arguments.length?(c=f==null?(t=null,new qt(r)):new ei(t=f),typeof i!="function"&&c.pointRadius(i),l):t},l.pointRadius=function(f){return arguments.length?(i=typeof f=="function"?f:(c.pointRadius(+f),+f),l):i},l.digits=function(f){if(!arguments.length)return r;if(f==null)r=null;else{const g=Math.floor(f);if(!(g>=0))throw new RangeError(`invalid digits: ${f}`);r=g}return t===null&&(c=new qt(r)),l},l.projection(n).digits(r).context(t)}function dt(n){return function(t){var r=new vt;for(var i in n)r[i]=n[i];return r.stream=t,r}}function vt(){}vt.prototype={constructor:vt,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function St(n,t,r){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),un(r,n.stream(Wn)),t(Wn.result()),i!=null&&n.clipExtent(i),n}function ci(n,t,r){return St(n,function(i){var e=t[1][0]-t[0][0],c=t[1][1]-t[0][1],l=Math.min(e/(i[1][0]-i[0][0]),c/(i[1][1]-i[0][1])),f=+t[0][0]+(e-l*(i[1][0]+i[0][0]))/2,g=+t[0][1]+(c-l*(i[1][1]+i[0][1]))/2;n.scale(150*l).translate([f,g])},r)}function Hi(n,t,r){return ci(n,[[0,0],t],r)}function Oi(n,t,r){return St(n,function(i){var e=+t,c=e/(i[1][0]-i[0][0]),l=(e-c*(i[1][0]+i[0][0]))/2,f=-c*i[0][1];n.scale(150*c).translate([l,f])},r)}function Ji(n,t,r){return St(n,function(i){var e=+t,c=e/(i[1][1]-i[0][1]),l=-c*i[0][0],f=(e-c*(i[1][1]+i[0][1]))/2;n.scale(150*c).translate([l,f])},r)}var Wt=16,Ki=I(30*T);function Bt(n,t){return+t?Ui(n,t):Qi(n)}function Qi(n){return dt({point:function(t,r){t=n(t,r),this.stream.point(t[0],t[1])}})}function Ui(n,t){function r(i,e,c,l,f,g,v,o,u,a,s,h,y,d){var R=v-i,E=o-e,$=R*R+E*E;if($>4*t&&y--){var S=l+a,P=f+s,M=g+h,C=en(S*S+P*P+M*M),L=ln(M/=C),z=Y(Y(M)-1)<m||Y(c-u)<m?(c+u)/2:fn(P,S),X=n(z,L),w=X[0],H=X[1],Z=w-i,F=H-e,p=E*Z-R*F;(p*p/$>t||Y((R*Z+E*F)/$-.5)>.3||l*a+f*s+g*h<Ki)&&(r(i,e,c,l,f,g,w,H,z,S/=C,P/=C,M,y,d),d.point(w,H),r(w,H,z,S,P,M,v,o,u,a,s,h,y,d))}}return function(i){var e,c,l,f,g,v,o,u,a,s,h,y,d={point:R,lineStart:E,lineEnd:S,polygonStart:function(){i.polygonStart(),d.lineStart=P},polygonEnd:function(){i.polygonEnd(),d.lineStart=E}};function R(L,z){L=n(L,z),i.point(L[0],L[1])}function E(){u=NaN,d.point=$,i.lineStart()}function $(L,z){var X=sn([L,z]),w=n(L,z);r(u,a,o,s,h,y,u=w[0],a=w[1],o=L,s=X[0],h=X[1],y=X[2],Wt,i),i.point(u,a)}function S(){d.point=R,i.lineEnd()}function P(){E(),d.point=M,d.lineEnd=C}function M(L,z){$(e=L,z),c=u,l=a,f=s,g=h,v=y,d.point=$}function C(){r(u,a,o,s,h,y,c,l,e,f,g,v,Wt,i),d.lineEnd=S,S()}return d}}var Vi=dt({point:function(n,t){this.stream.point(n*T,t*T)}});function xi(n){return dt({point:function(t,r){var i=n(t,r);return this.stream.point(i[0],i[1])}})}function ki(n,t,r,i,e){function c(l,f){return l*=i,f*=e,[t+n*l,r-n*f]}return c.invert=function(l,f){return[(l-t)/n*i,(r-f)/n*e]},c}function Gt(n,t,r,i,e,c){if(!c)return ki(n,t,r,i,e);var l=I(c),f=A(c),g=l*n,v=f*n,o=l/n,u=f/n,a=(f*r-l*t)/n,s=(f*t+l*r)/n;function h(y,d){return y*=i,d*=e,[g*y-v*d+t,r-v*y-g*d]}return h.invert=function(y,d){return[i*(o*y-u*d+a),e*(s-u*y-o*d)]},h}function ji(n){return bi(function(){return n})()}function bi(n){var t,r=150,i=480,e=250,c=0,l=0,f=0,g=0,v=0,o,u=0,a=1,s=1,h=null,y=At,d=null,R,E,$,S=ot,P=.5,M,C,L,z,X;function w(p){return L(p[0]*T,p[1]*T)}function H(p){return p=L.invert(p[0],p[1]),p&&[p[0]*q,p[1]*q]}w.stream=function(p){return z&&X===p?z:z=Vi(xi(o)(y(M(S(X=p)))))},w.preclip=function(p){return arguments.length?(y=p,h=void 0,F()):y},w.postclip=function(p){return arguments.length?(S=p,d=R=E=$=null,F()):S},w.clipAngle=function(p){return arguments.length?(y=+p?zi(h=p*T):(h=null,At),F()):h*q},w.clipExtent=function(p){return arguments.length?(S=p==null?(d=R=E=$=null,ot):Ai(d=+p[0][0],R=+p[0][1],E=+p[1][0],$=+p[1][1]),F()):d==null?null:[[d,R],[E,$]]},w.scale=function(p){return arguments.length?(r=+p,Z()):r},w.translate=function(p){return arguments.length?(i=+p[0],e=+p[1],Z()):[i,e]},w.center=function(p){return arguments.length?(c=p[0]%360*T,l=p[1]%360*T,Z()):[c*q,l*q]},w.rotate=function(p){return arguments.length?(f=p[0]%360*T,g=p[1]%360*T,v=p.length>2?p[2]%360*T:0,Z()):[f*q,g*q,v*q]},w.angle=function(p){return arguments.length?(u=p%360*T,Z()):u*q},w.reflectX=function(p){return arguments.length?(a=p?-1:1,Z()):a<0},w.reflectY=function(p){return arguments.length?(s=p?-1:1,Z()):s<0},w.precision=function(p){return arguments.length?(M=Bt(C,P=p*p),F()):en(P)},w.fitExtent=function(p,_){return ci(w,p,_)},w.fitSize=function(p,_){return Hi(w,p,_)},w.fitWidth=function(p,_){return Oi(w,p,_)},w.fitHeight=function(p,_){return Ji(w,p,_)};function Z(){var p=Gt(r,0,0,a,s,u).apply(null,t(c,l)),_=Gt(r,i-p[0],e-p[1],a,s,u);return o=Ut(f,g,v),C=rt(t,_),L=rt(o,C),M=Bt(C,P),F()}function F(){return z=X=null,w}return function(){return t=n.apply(this,arguments),w.invert=t.invert&&H,Z()}}function Et(n,t){return[n,pi(hi((J+t)/2))]}Et.invert=function(n,t){return[n,2*Ot(ai(t))-J]};function er(){return nr(Et).scale(961/Q)}function nr(n){var t=ji(n),r=t.center,i=t.scale,e=t.translate,c=t.clipExtent,l=null,f,g,v;t.scale=function(u){return arguments.length?(i(u),o()):i()},t.translate=function(u){return arguments.length?(e(u),o()):e()},t.center=function(u){return arguments.length?(r(u),o()):r()},t.clipExtent=function(u){return arguments.length?(u==null?l=f=g=v=null:(l=+u[0][0],f=+u[0][1],g=+u[1][0],v=+u[1][1]),o()):l==null?null:[[l,f],[g,v]]};function o(){var u=N*i(),a=t(yi(t.rotate()).invert([0,0]));return c(l==null?[[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]]:n===Et?[[Math.max(a[0]-u,l),f],[Math.min(a[0]+u,g),v]]:[[l,Math.max(a[1]-u,f)],[g,Math.min(a[1]+u,v)]])}return o()}export{ir as c,rr as i,er as m};
